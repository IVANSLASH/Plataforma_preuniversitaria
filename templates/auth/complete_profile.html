{% extends "base.html" %}

{% block title %}Completar Perfil - Plataforma Preuniversitaria{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Completa tu Perfil</h3>
                </div>
                <div class="card-body">
                    <p class="card-text">¡Bienvenido! Para continuar, por favor completa los siguientes datos. Esto nos ayudará a personalizar tu experiencia.</p>
                    
                    <form method="POST" action="{{ url_for('auth.complete_profile') }}">
                        <div class="mb-3">
                            <label for="institucion_educativa_secundaria" class="form-label">Institución Educativa Secundaria</label>
                            <input type="text" class="form-control" id="institucion_educativa_secundaria" name="institucion_educativa_secundaria" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="nivel_academico_actual" class="form-label">Nivel Académico Actual</label>
                            <select class="form-select" id="nivel_academico_actual" name="nivel_academico_actual" required onchange="toggleOtroNivel(this)">
                                <option selected disabled value="">Elige una opción...</option>
                                <option value="secundaria">Secundaria</option>
                                <option value="bachillerato">Bachillerato</option>
                                <option value="egresado">Egresado</option>
                                <option value="universitario">Universitario</option>
                                <option value="titulado">Titulado</option>
                                <option value="docente">Docente</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>

                        <div class="mb-3" id="otro_nivel_div" style="display: none;">
                            <label for="nivel_academico_otro" class="form-label">Especificar Otro Nivel Académico</label>
                            <input type="text" class="form-control" id="nivel_academico_otro" name="nivel_academico_otro">
                        </div>

                        <div class="mb-3">
                            <label for="ciudad" class="form-label">Ciudad / Región de Residencia</label>
                            <input type="text" class="form-control" id="ciudad" name="ciudad" required>
                        </div>

                        <div class="mb-3">
                            <label for="whatsapp" class="form-label">Número de WhatsApp (Opcional)</label>
                            <input type="tel" class="form-control" id="whatsapp" name="whatsapp" placeholder="+591...">
                        </div>

                        <div class="mb-3">
                            <label for="carrera_interes" class="form-label">Carrera de Interés</label>
                            <input type="text" class="form-control" id="carrera_interes" name="carrera_interes" placeholder="Ej: Ingeniería de Software, Medicina, etc.">
                        </div>

                        <button type="submit" class="btn btn-primary">Guardar y Continuar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function toggleOtroNivel(selectElement) {
    const otroNivelDiv = document.getElementById('otro_nivel_div');
    if (selectElement.value === 'otro') {
        otroNivelDiv.style.display = 'block';
        document.getElementById('nivel_academico_otro').required = true;
    } else {
        otroNivelDiv.style.display = 'none';
        document.getElementById('nivel_academico_otro').required = false;
    }
}
</script>
{% endblock %}